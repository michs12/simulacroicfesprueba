<!DOCTYPE html>
<html lang="es">
>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulacro ICFES — By Mitch</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    :root {
      --color-bg: #f7f9fb;
      --color-card: #ffffff;
      --color-primary: #2563eb;
      --color-secondary: #0ea5e9;
      --color-muted: #6b7280;
      --radius: 12px;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background: linear-gradient(180deg, #e0f2fe, #f7f9fb);
      color: #1e293b;
    }
    header {
      background: var(--color-primary);
      color: white;
      padding: 14px 24px;
      text-align: center;
      font-weight: 700;
      letter-spacing: 0.5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    main {
      max-width: 900px;
      margin: 20px auto;
      background: var(--color-card);
      border-radius: var(--radius);
      padding: 28px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.05);
    }
    .hidden { display: none; }
    .btn {
      background: var(--color-primary);
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
    }
    .btn:hover {
      background: var(--color-secondary);
    }
    .question {
      margin-bottom: 16px;
      background: #f9fafb;
      padding: 14px;
      border-radius: var(--radius);
      border-left: 4px solid var(--color-primary);
    }
    .question h4 { margin: 0 0 8px; }
    label { display: block; margin: 4px 0; }
    #timer {
      background: #e0f2fe;
      padding: 8px 14px;
      border-radius: 8px;
      font-weight: 600;
      color: var(--color-primary);
      float: right;
    }
    #results {
      text-align: center;
    }
    .incorrect { color: red; }
    .correct { color: green; }
  </style>
</head>

<body>
  <header>
    Simulacro ICFES — By Mitch
    <span id="timer" class="hidden">45:00</span>
  </header>

  <main>
    <!-- INICIO -->
    <section id="inicio">
      <h2>Bienvenido/a al Simulacro ICFES</h2>
      <p>Escribe tu nombre para comenzar. Tienes <strong>45 minutos</strong> en total.</p>
      <input type="text" id="nombre" placeholder="Tu nombre" style="padding:8px;border-radius:8px;width:60%;margin-bottom:12px;">
      <br>
      <button class="btn" onclick="iniciarSimulacro()">Iniciar Simulacro</button>
    </section>

    <!-- ÁREAS -->
    <section id="area" class="hidden">
      <h2 id="tituloArea">Matemáticas</h2>
      <div id="preguntas"></div>
      <button class="btn" id="btnSiguiente" onclick="siguienteArea()">Siguiente área</button>
    </section>

    <!-- RESULTADOS -->
    <section id="resultados" class="hidden">
      <h2>Resultados finales</h2>
      <div id="resumen"></div>
      <button class="btn" onclick="exportarPDF()">Exportar tus resultados en PDF</button>
    </section>
  </main>

  <script>
    const { jsPDF } = window.jspdf;

    const areas = [
      { nombre: "Matemáticas" },
      { nombre: "Sociales" },
      { nombre: "Lectura Crítica" },
      { nombre: "Ciencias Naturales" },
      { nombre: "Inglés" }
    ];

    let indiceArea = 0;
    let respuestas = {};
    let tiempo = 45 * 60;
    let temporizador;
    let nombreUsuario = "";

    const preguntasPorArea = {
      "Matemáticas": [
        { q: "¿Cuánto es 5 + 3?", a: ["6","7","8","9"], c: 2 },
        { q: "¿Cuál es la raíz cuadrada de 49?", a: ["6","7","8","9"], c: 1 },
        { q: "¿Cuánto es 12 x 8?", a: ["96","88","102","108"], c: 0 },
        { q: "¿Cuánto es 25% de 200?", a: ["25","40","50","60"], c: 2 },
        { q: "¿Cuál es el número primo?", a: ["9","12","15","17"], c: 3 },
        { q: "¿Cuánto es 10²?", a: ["10","20","100","200"], c: 2 },
        { q: "¿Cuánto es 2³?", a: ["6","8","9","12"], c: 1 },
        { q: "¿Cuánto es 100/4?", a: ["20","25","30","40"], c: 1 },
        { q: "¿Cuánto es 9x9?", a: ["81","72","90","99"], c: 0 },
        { q: "¿Cuál es el doble de 25?", a: ["40","45","50","55"], c: 2 }
      ],
      "Sociales": [
        { q: "¿Quién fue Simón Bolívar?", a: ["Poeta","Libertador","Presidente de EE.UU","Explorador"], c: 1 },
        { q: "¿Dónde se firmó la independencia de Colombia?", a: ["Cartagena","Bogotá","Tunja","Santa Fe"], c: 3 },
        { q: "¿En qué año fue la independencia de Colombia?", a: ["1810","1820","1819","1830"], c: 2 },
        { q: "¿Qué tipo de gobierno tiene Colombia?", a: ["Monarquía","Dictadura","República","Imperio"], c: 2 },
        { q: "¿Cuál es la capital del Atlántico?", a: ["Cali","Barranquilla","Medellín","Bogotá"], c: 1 },
        { q: "¿Qué es una constitución?", a: ["Una ley suprema","Un impuesto","Un presidente","Un decreto"], c: 0 },
        { q: "¿Cuál es la moneda de Colombia?", a: ["Euro","Peso","Dólar","Real"], c: 1 },
        { q: "¿Quién fue Jorge Eliécer Gaitán?", a: ["Político","Actor","Deportista","Cantante"], c: 0 },
        { q: "¿Qué evento marcó el Bogotazo?", a: ["Su asesinato","La independencia","La creación de Bogotá","La guerra civil"], c: 0 },
        { q: "¿Qué continente está Colombia?", a: ["Europa","América","Asia","África"], c: 1 }
      ],
      "Lectura Crítica": [
        { q: "El sinónimo de 'feliz' es:", a: ["Triste","Contento","Molesto","Serio"], c: 1 },
        { q: "El antónimo de 'valiente' es:", a: ["Cobarde","Fuerte","Audaz","Atrevido"], c: 0 },
        { q: "¿Qué significa 'persuadir'?", a: ["Convencer","Obligar","Ignorar","Mentir"], c: 0 },
        { q: "¿Qué es una metáfora?", a: ["Figura literaria","Frase común","Refrán","Proverbio"], c: 0 },
        { q: "¿Qué expresa un texto narrativo?", a: ["Datos","Opiniones","Relatos","Mandatos"], c: 2 },
        { q: "El texto argumentativo busca:", a: ["Convencer","Describir","Narrar","Ordenar"], c: 0 },
        { q: "Un sinónimo de 'hermoso' es:", a: ["Feo","Bonito","Raro","Oscuro"], c: 1 },
        { q: "Un antónimo de 'rápido' es:", a: ["Ligero","Lento","Veloz","Ágil"], c: 1 },
        { q: "El texto expositivo busca:", a: ["Explicar","Narrar","Persuadir","Emocionar"], c: 0 },
        { q: "El narrador en primera persona usa:", a: ["Él","Ella","Yo","Nosotros"], c: 2 }
      ],
      "Ciencias Naturales": [
        { q: "El agua se congela a:", a: ["0°C","10°C","32°C","-10°C"], c: 0 },
        { q: "El sol es una:", a: ["Estrella","Planeta","Luna","Galaxia"], c: 0 },
        { q: "Los pulmones pertenecen al sistema:", a: ["Digestivo","Respiratorio","Circulatorio","Nervioso"], c: 1 },
        { q: "El ADN contiene:", a: ["Azúcar","Información genética","Proteínas","Sales"], c: 1 },
        { q: "La Tierra gira alrededor del:", a: ["Sol","Luna","Marte","Venus"], c: 0 },
        { q: "El órgano que bombea sangre es:", a: ["Pulmón","Cerebro","Corazón","Hígado"], c: 2 },
        { q: "¿Cuál es un gas del aire?", a: ["Oxígeno","Agua","Hierro","Carbono"], c: 0 },
        { q: "El cuerpo humano tiene:", a: ["206 huesos","100 huesos","300 huesos","250 huesos"], c: 0 },
        { q: "El agua en ebullición está a:", a: ["50°C","100°C","150°C","200°C"], c: 1 },
        { q: "El planeta más cercano al Sol es:", a: ["Venus","Marte","Mercurio","Tierra"], c: 2 }
      ],
      "Inglés": [
        { q: "Translate: 'Dog'", a: ["Perro","Gato","Pájaro","Pez"], c: 0 },
        { q: "Translate: 'House'", a: ["Casa","Puerta","Ventana","Calle"], c: 0 },
        { q: "The plural of 'Child' is:", a: ["Childs","Children","Childes","Child"], c: 1 },
        { q: "'Book' means:", a: ["Mesa","Libro","Bolígrafo","Lápiz"], c: 1 },
        { q: "Opposite of 'Hot':", a: ["Warm","Cold","Cool","Freeze"], c: 1 },
        { q: "Translate: 'Sun'", a: ["Sol","Luna","Estrella","Cielo"], c: 0 },
        { q: "'Teacher' means:", a: ["Estudiante","Profesor","Doctor","Amigo"], c: 1 },
        { q: "Translate: 'Car'", a: ["Avión","Tren","Carro","Barco"], c: 2 },
        { q: "Opposite of 'Happy':", a: ["Sad","Glad","Nice","Smile"], c: 0 },
        { q: "Translate: 'Water'", a: ["Fuego","Aire","Tierra","Agua"], c: 3 }
      ]
    };

    function iniciarSimulacro() {
      nombreUsuario = document.getElementById("nombre").value.trim();
      if (!nombreUsuario) return alert("Por favor escribe tu nombre.");

      document.getElementById("inicio").classList.add("hidden");
      document.getElementById("area").classList.remove("hidden");
      document.getElementById("timer").classList.remove("hidden");

      iniciarTemporizador();
      mostrarPreguntas();
    }

    function iniciarTemporizador() {
      const timerElement = document.getElementById("timer");
      temporizador = setInterval(() => {
        const min = Math.floor(tiempo / 60);
        const seg = tiempo % 60;
        timerElement.textContent = `${String(min).padStart(2,"0")}:${String(seg).padStart(2,"0")}`;
        if (tiempo <= 0) {
          clearInterval(temporizador);
          finalizarSimulacro();
        }
        tiempo--;
      }, 1000);
    }

    function mostrarPreguntas() {
      const areaActual = areas[indiceArea].nombre;
      document.getElementById("tituloArea").textContent = areaActual;
      const contenedor = document.getElementById("preguntas");
      contenedor.innerHTML = "";

      preguntasPorArea[areaActual].forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `<h4>${i + 1}. ${p.q}</h4>` +
          p.a.map((op, j) => `
            <label>
              <input type="radio" name="preg${i}" value="${j}">
              ${op}
            </label>`).join("");
        contenedor.appendChild(div);
      });
    }

    function siguienteArea() {
      const areaActual = areas[indiceArea].nombre;
      const respuestasArea = [];
      preguntasPorArea[areaActual].forEach((_, i) => {
        const seleccion = document.querySelector(`input[name='preg${i}']:checked`);
        respuestasArea.push(seleccion ? parseInt(seleccion.value) : null);
      });
      respuestas[areaActual] = respuestasArea;

      indiceArea++;
      if (indiceArea < areas.length) {
        mostrarPreguntas();
      } else {
        finalizarSimulacro();
      }
    }

    function finalizarSimulacro() {
      clearInterval(temporizador);
      document.getElementById("area").classList.add("hidden");
      document.getElementById("resultados").classList.remove("hidden");
      document.getElementById("timer").classList.add("hidden");

      let total = 0, correctas = 0;
      let resumenHTML = `<h3>${nombreUsuario}</h3><p>Tiempo total: ${formatoTiempo(45*60 - tiempo)}</p><hr>`;

      for (const area in preguntasPorArea) {
        let correctasArea = 0;
        resumenHTML += `<h4>${area}</h4>`;
        preguntasPorArea[area].forEach((p, i) => {
          const user = respuestas[area]?.[i];
          const correcto = p.c;
          const color = user === correcto ? "correct" : "incorrect";
          if (user === correcto) correctasArea++;
          resumenHTML += `<p class="${color}">${i+1}. ${p.q} — ${p.a[user] || "Sin respuesta"} (${user === correcto ? "✔" : "✖"})</p>`;
        });
        resumenHTML += `<strong>Puntaje en ${area}: ${correctasArea}/10</strong><hr>`;
        correctas += correctasArea;
        total += 10;
      }

      resumenHTML += `<h3>Total: ${correctas}/${total}</h3>`;
      document.getElementById("resumen").innerHTML = resumenHTML;
    }

    function formatoTiempo(segundos) {
      const min = Math.floor(segundos / 60);
      const seg = segundos % 60;
      return `${String(min).padStart(2, "0")}:${String(seg).padStart(2, "0")}`;
    }

    function exportarPDF() {
      const doc = new jsPDF();
      doc.setFont("helvetica", "bold");
      doc.text("Simulacro ICFES — Resultados", 14, 16);
      doc.setFont("helvetica", "normal");
      doc.text(`Nombre: ${nombreUsuario}`, 14, 26);
      doc.text(`Tiempo total: ${formatoTiempo(45*60 - tiempo)}`, 14, 34);

      let y = 44;
      for (const area in preguntasPorArea) {
        doc.setFont("helvetica", "bold");
        doc.text(area, 14, y);
        y += 6;
        doc.setFont("helvetica", "normal");
        preguntasPorArea[area].forEach((p, i) => {
          const user = respuestas[area]?.[i];
          const correcto = p.c;
          const text = `${i + 1}. ${p.q} — ${p.a[user] || "Sin respuesta"}`;
          if (user === correcto) {
            doc.setTextColor(0, 128, 0);
          } else {
            doc.setTextColor(255, 0, 0);
          }
          doc.text(text, 16, y);
          y += 6;
          if (y > 270) { doc.addPage(); y = 20; }
        });
        y += 8;
      }

      doc.setTextColor(0, 0, 0);
      doc.save(`Simulacro_${nombreUsuario}.pdf`);
    }
  </script>
</body>
</html>

