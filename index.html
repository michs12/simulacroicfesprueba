<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulacro ICFES Michelle Flórez</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --primary: #2563eb;
    --secondary: #60a5fa;
    --bg: #f0f6ff;
    --card: #ffffff;
    --text: #1e293b;
    --muted: #64748b;
    --success: #16a34a;
    --error: #dc2626;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
  body {
    background: linear-gradient(180deg, var(--bg) 0%, #fff 100%);
    color: var(--text);
    min-height: 100vh;
  }
  header {
    background: var(--primary);
    color: #fff;
    padding: 1rem 2rem;
    text-align: center;
    font-weight: 700;
    font-size: 1.4rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  .container {
    max-width: 800px;
    margin: 2rem auto;
    background: var(--card);
    border-radius: 14px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.05);
    padding: 2rem;
  }
  .center { text-align: center; }
  button {
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 0.7rem 1.4rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    margin-top: 1rem;
  }
  button:hover { background: var(--secondary); }
  .hidden { display: none; }
  .question { margin-bottom: 1.2rem; }
  .question h3 { font-size: 1rem; margin-bottom: 0.5rem; }
  .options label { display: block; margin-bottom: 0.3rem; cursor: pointer; }
  .timer {
    background: #e0edff;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    display: inline-block;
    font-weight: 600;
    margin-top: 0.5rem;
  }
  .area-title {
    text-align: center;
    color: var(--primary);
    font-size: 1.4rem;
    margin-bottom: 1rem;
  }
  .result {
    margin-top: 2rem;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
  }
  .success { color: var(--success); }
  .error { color: var(--error); }
</style>
</head>
<body>

<header>Simulacro ICFES — Michelle Flórez</header>

<div class="container" id="inicio">
  <div class="center">
    <h2>Bienvenido al Simulacro ICFES</h2>
    <p>Ingresa tu nombre para comenzar:</p>
    <input type="text" id="nombre" placeholder="Tu nombre" style="padding:0.5rem;border-radius:8px;border:1px solid #ccc;margin-top:10px;width:80%;max-width:300px;"><br>
    <button onclick="iniciarSimulacro()">Iniciar Simulacro</button>
  </div>
</div>

<div class="container hidden" id="simulacro">
  <div class="center">
    <h2 id="area-title" class="area-title"></h2>
    <div class="timer" id="timer">45:00</div>
  </div>
  <form id="formulario"></form>
  <div class="center">
    <button id="next-btn" onclick="siguienteArea()">Siguiente Área</button>
  </div>
</div>

<div class="container hidden" id="resultados">
  <div class="center">
    <h2>Resultados del Simulacro</h2>
    <div id="resumen"></div>
    <button onclick="exportarPDF()">Descargar Resultados (PDF)</button>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const { jsPDF } = window.jspdf;

let tiempo = 45 * 60; // 45 minutos
let intervalo;
let nombreEstudiante = "";
let areaActual = 0;
const areas = ["Matemáticas", "Sociales", "Lectura Crítica", "Ciencias Naturales", "Inglés"];
const resultados = {};

const preguntas = {
  "Matemáticas": [
    { p: "¿Cuánto es 25 × 4?", o: ["50","100","75","125"], r: "100" },
    { p: "¿Cuál es la raíz cuadrada de 81?", o: ["9","8","7","6"], r: "9" },
    { p: "Si un triángulo tiene lados 3, 4 y 5, ¿qué tipo es?", o: ["Equilátero","Isósceles","Escaleno","Rectángulo"], r: "Rectángulo" },
    { p: "¿Cuánto es 15% de 200?", o: ["25","30","35","40"], r: "30" },
    { p: "¿Cuál es el valor de π (pi) aproximado?", o: ["3.14","3.04","3.24","3.00"], r: "3.14" },
    { p: "¿Cuánto es 12²?", o: ["124","122","144","164"], r: "144" },
    { p: "¿Cuánto es 7×8?", o: ["54","56","58","64"], r: "56" },
    { p: "¿Qué es 1/4 en porcentaje?", o: ["10%","25%","40%","50%"], r: "25%" },
    { p: "¿Cuál es el doble de 64?", o: ["124","126","128","130"], r: "128" },
    { p: "¿Cuánto es 5³?", o: ["25","125","75","150"], r: "125" }
  ],
  "Sociales": [
    { p: "¿En qué año se firmó la independencia de Colombia?", o: ["1810","1819","1821","1830"], r: "1810" },
    { p: "¿Quién fue Simón Bolívar?", o: ["Pintor","Libertador","Rey","Presidente actual"], r: "Libertador" },
    { p: "¿Cuál es la capital de Francia?", o: ["París","Madrid","Roma","Berlín"], r: "París" },
    { p: "¿Qué representa la bandera de Colombia?", o: ["Ríos, montañas y mar","Riqueza, sangre y cielo","Sol, luna y tierra","Nada"], r: "Riqueza, sangre y cielo" },
    { p: "¿Qué sistema político predomina en Colombia?", o: ["Monarquía","Dictadura","República democrática","Imperio"], r: "República democrática" },
    { p: "¿Qué océano baña la costa occidental de Colombia?", o: ["Atlántico","Pacífico","Índico","Ninguno"], r: "Pacífico" },
    { p: "¿Cuál es la principal fuente de derecho?", o: ["La ley","La costumbre","El juez","El presidente"], r: "La ley" },
    { p: "¿Qué país limita al sur con Colombia?", o: ["Panamá","Ecuador","Brasil","Perú"], r: "Ecuador" },
    { p: "¿En qué continente está Colombia?", o: ["Asia","África","América","Europa"], r: "América" },
    { p: "¿Cuál es la moneda de Colombia?", o: ["Peso colombiano","Dólar","Euro","Sol"], r: "Peso colombiano" }
  ],
  "Lectura Crítica": [
    { p: "¿Qué es una idea principal?", o: ["La más repetida","La que resume el texto","La primera oración","Una cita"], r: "La que resume el texto" },
    { p: "¿Qué es un sinónimo?", o: ["Palabra igual","Palabra contraria","Palabra parecida","Palabra inventada"], r: "Palabra parecida" },
    { p: "¿Qué es inferir?", o: ["Adivinar","Comprender literalmente","Deduce información implícita","Repetir"], r: "Deduce información implícita" },
    { p: "¿Qué es un texto narrativo?", o: ["Describe hechos","Explica conceptos","Cuenta una historia","Da instrucciones"], r: "Cuenta una historia" },
    { p: "¿Qué indica un punto final?", o: ["Pausa breve","Cambio de tema","Fin del texto","Ninguna"], r: "Fin del texto" },
    { p: "¿Qué es el autor?", o: ["El que lee","El que escribe","El personaje","El crítico"], r: "El que escribe" },
    { p: "¿Qué es un argumento?", o: ["Una historia","Una opinión con razones","Un ejemplo","Una cita"], r: "Una opinión con razones" },
    { p: "¿Qué son los conectores?", o: ["Palabras de unión","Nombres propios","Sustantivos","Adjetivos"], r: "Palabras de unión" },
    { p: "¿Qué expresa un texto expositivo?", o: ["Hechos reales","Opiniones","Emociones","Ficción"], r: "Hechos reales" },
    { p: "¿Qué hace un título?", o: ["Resume el tema","Es adorno","Confunde","Nada"], r: "Resume el tema" }
  ],
  "Ciencias Naturales": [
    { p: "¿Cuál es el órgano principal del sistema circulatorio?", o: ["Cerebro","Pulmones","Corazón","Riñones"], r: "Corazón" },
    { p: "¿Qué gas respiramos?", o: ["CO2","Nitrógeno","Oxígeno","Hidrógeno"], r: "Oxígeno" },
    { p: "¿Cuál es el planeta más grande?", o: ["Tierra","Marte","Júpiter","Venus"], r: "Júpiter" },
    { p: "¿Qué necesita una planta para hacer fotosíntesis?", o: ["Sol y agua","Aire y fuego","Frío y calor","Nada"], r: "Sol y agua" },
    { p: "¿Cuál es el estado líquido del agua?", o: ["Hielo","Vapor","Agua","Nieve"], r: "Agua" },
    { p: "¿Qué parte del cuerpo bombea sangre?", o: ["Pulmones","Corazón","Cerebro","Hígado"], r: "Corazón" },
    { p: "¿Qué fuerza nos mantiene en el suelo?", o: ["Viento","Magnetismo","Gravedad","Energía"], r: "Gravedad" },
    { p: "¿Qué órgano filtra la sangre?", o: ["Hígado","Corazón","Riñón","Estómago"], r: "Riñón" },
    { p: "¿Qué estrella ilumina la Tierra?", o: ["Luna","Marte","Sol","Júpiter"], r: "Sol" },
    { p: "¿Cuál es el metal líquido a temperatura ambiente?", o: ["Hierro","Mercurio","Oro","Plata"], r: "Mercurio" }
  ],
  "Inglés": [
    { p: "What color is the sky?", o: ["Blue","Red","Green","Black"], r: "Blue" },
    { p: "Translate: 'Dog'", o: ["Gato","Perro","Pez","Rana"], r: "Perro" },
    { p: "What is the plural of 'child'?", o: ["Childs","Childes","Children","Chields"], r: "Children" },
    { p: "Complete: I ___ a student.", o: ["am","is","are","be"], r: "am" },
    { p: "Opposite of 'hot'", o: ["Cold","Warm","Cool","Dry"], r: "Cold" },
    { p: "Synonym of 'happy'", o: ["Sad","Angry","Glad","Tired"], r: "Glad" },
    { p: "Translate: 'House'", o: ["Casa","Perro","Carro","Escuela"], r: "Casa" },
    { p: "Verb 'to eat' in past is:", o: ["Eating","Eat","Ate","Eaten"], r: "Ate" },
    { p: "Translate: 'School'", o: ["Escuela","Casa","Trabajo","Libro"], r: "Escuela" },
    { p: "Opposite of 'big'", o: ["Large","Huge","Small","Tall"], r: "Small" }
  ]
};

function iniciarSimulacro() {
  nombreEstudiante = document.getElementById("nombre").value.trim();
  if (!nombreEstudiante) return alert("Por favor ingresa tu nombre");
  document.getElementById("inicio").classList.add("hidden");
  document.getElementById("simulacro").classList.remove("hidden");
  iniciarTemporizador();
  mostrarArea();
}

function iniciarTemporizador() {
  const timer = document.getElementById("timer");
  intervalo = setInterval(() => {
    const min = Math.floor(tiempo / 60);
    const seg = tiempo % 60;
    timer.textContent = `${min}:${seg.toString().padStart(2,"0")}`;
    tiempo--;
    if (tiempo < 0) {
      clearInterval(intervalo);
      finalizarSimulacro();
    }
  }, 1000);
}

function mostrarArea() {
  const area = areas[areaActual];
  document.getElementById("area-title").textContent = area;
  const form = document.getElementById("formulario");
  form.innerHTML = "";
  preguntas[area].forEach((q, i) => {
    const div = document.createElement("div");
    div.classList.add("question");
    div.innerHTML = `<h3>${i+1}. ${q.p}</h3>` + 
      q.o.map(op => `<label><input type="radio" name="q${i}" value="${op}"> ${op}</label>`).join("");
    form.appendChild(div);
  });
}

function siguienteArea() {
  const area = areas[areaActual];
  const form = document.getElementById("formulario");
  const respuestas = form.querySelectorAll("input[type=radio]:checked");
  let correctas = 0;
  respuestas.forEach((res, i) => {
    if (res.value === preguntas[area][i].r) correctas++;
  });
  resultados[area] = correctas;
  areaActual++;
  if (areaActual < areas.length) mostrarArea();
  else finalizarSimulacro();
}

function finalizarSimulacro() {
  clearInterval(intervalo);
  document.getElementById("simulacro").classList.add("hidden");
  document.getElementById("resultados").classList.remove("hidden");
  mostrarResultados();
}

function mostrarResultados() {
  const resumen = document.getElementById("resumen");
  resumen.innerHTML = "";
  let totalCorrectas = 0;
  let totalPreguntas = 0;
  for (const area in resultados) {
    const correctas = resultados[area];
    totalCorrectas += correctas;
    totalPreguntas += 10;
    const div = document.createElement("div");
    div.classList.add("result");
    div.innerHTML = `<strong>${area}:</strong> ${correctas}/10 correctas`;
    resumen.appendChild(div);
  }
  const porcentaje = ((totalCorrectas / totalPreguntas) * 100).toFixed(2);
  resumen.innerHTML += `<div class="result center"><strong>Total:</strong> ${totalCorrectas}/${totalPreguntas} — ${porcentaje}%</div>`;
}

function exportarPDF() {
  const doc = new jsPDF();
  const fecha = new Date().toLocaleString();
  doc.setFontSize(18);
  doc.text("Resultados del Simulacro ICFES", 20, 20);
  doc.setFontSize(12);
  doc.text(`Nombre: ${nombreEstudiante}`, 20, 30);
  doc.text(`Fecha: ${fecha}`, 20, 37);
  let y = 50;
  for (const area in resultados) {
    doc.text(`${area}: ${resultados[area]}/10 correctas`, 20, y);
    y += 10;
  }
  const total = Object.values(resultados).reduce((a,b)=>a+b,0);
  const porcentaje = ((total / 50) * 100).toFixed(2);
  doc.text(`\nTotal: ${total}/50 — ${porcentaje}%`, 20, y+10);
  doc.save(`Resultados_${nombreEstudiante}.pdf`);
}
</script>
</body>
</html>
